{{ define "main" }}
<html lang="{{ .Site.LanguageCode }}">
<head>
    {{- partial "head.html" . -}}
    {{ `
      <!--[if lt IE 9]>
          <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
          <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
      <![endif]-->
    ` | safeHTML }}

    {{- partial "favicon.html" . -}}
    {{ with .OutputFormats.Get "RSS" }}
      {{ printf `<link href="%s" rel="%s" type="%s" title="%s" />` .Permalink .Rel .MediaType.Type $.Site.Title | safeHTML }}
    {{ end }}
    {{- partial "opengraph.html" . -}}
    {{ template "_internal/twitter_cards.html" . }}
</head>
<h1>{{ .Page.Title | emojify }}</h1>
{{ partial "tags.html" .}}
{{ $readTime := mul (div (countwords .Content) 220.0) 60 }}
<p>Reading time: {{ math.Floor (div $readTime 60) }} minutes and
    {{ mod $readTime 60 }} seconds.</p>
{{ if and (isset .Params "image") .Params.image }}
    {{ $image := .Page.Resources.GetMatch .Params.image }}
    {{ with $image }}
        {{ $thumb := .Resize "1000x" }}
        {{ printf `<img src="%s" alt="%s" class="img-responsive gallery-image">` $thumb.RelPermalink .Title | safeHTML }}
    {{end}}
{{ end }}

{{ .Content | emojify }}
{{ template "_internal/disqus.html" . }}
</html>
{{ end }}